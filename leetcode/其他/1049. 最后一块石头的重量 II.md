# [1049. 最后一块石头的重量 II](https://leetcode.cn/problems/last-stone-weight-ii/description/)

> **日期**：2025-05-17
> **所用时间**：7min

## 1. 前缀和 + 滑动窗口

这道题的关键在于：
1. 计算不使用技能时满意的顾客数（前缀和）
2. 计算使用技能时能挽回的顾客数（滑动窗口）

具体步骤：
1. 使用前缀和数组 $pre$ 记录不使用技能时满意的顾客数
2. 将 $customers$ 数组转换为前缀和数组，方便计算区间和
3. 遍历所有可能的技能使用区间，计算：
   - 使用技能挽回的顾客数 = 区间内原本不满意的顾客数
   - 总满意顾客数 = 原本满意的顾客数 + 挽回的顾客数

- 时间复杂度：$O(n)$
- 空间复杂度：$O(n)$

**Python3**

```python
class Solution:
    def lastStoneWeightII(self, stones: List[int]) -> int:
        s = sum(stones)
        target = s // 2
        f = [0] * (target + 1)

        for x in stones:
            for j in range(target, x - 1, -1):
                f[j] = max(f[j], f[j - x] + x)
        return s - 2 * max(f)
```
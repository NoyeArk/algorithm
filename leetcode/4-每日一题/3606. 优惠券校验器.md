# [3606. 优惠券校验器](https://leetcode.cn/problems/coupon-code-validator/description/)

> **日期**：2025-12-13
> **所用时间**：40min

## 1. 模拟

思路梳理如下：

本题是一道模拟题，对每个优惠券校验合规性，返回所有合格且排序后的优惠券编号。
1. 每个优惠券有三组数据：编号 $code$，业务线 $businessLine$，激活状态 $isActive$。
2. 合法条件：
    - 业务线属于如下四种之一：$["electronics", "grocery", "pharmacy", "restaurant"]$
    - 状态为激活（$isActive == True$）
    - 编号 $code$:
        - 非空
        - 只包含字母、数字或下划线（即 $code[i]$ 里的所有字符都是合法字符），可以使用 $isalnum()$ 或判等 $'_'$

3. 校验所有优惠券是否满足条件，是则记录索引。
4. 按业务线和优惠券编号字典序从小到大排序合规优惠券，可以使用元组 $(businessLine[i], code[i])$。
5. 返回排序后合格优惠券代码，即 $code[i]$。

**复杂度分析**

- 时间复杂度: $O(nl + n\log n)$ ,其中 $n$ 是优惠券数量，$l$ 是每个优惠券的长度
- 空间复杂度: $O(n)$

**Python3**

```python
class Solution:
    def validateCoupons(self, code: List[str], businessLine: List[str], isActive: List[bool]) -> List[str]:
        n, idx = len(code), []
        for i in range(n):
            if businessLine[i] not in ["electronics", "grocery", "pharmacy", "restaurant"]:
                continue
            if not isActive[i]:
                continue
            if not code[i] or any(not c.isalnum() and c != '_' for c in code[i]):
                continue
            idx.append(i)

        idx.sort(key=lambda i: (businessLine[i], code[i]))
        return [code[i] for i in idx]
```
# [1461. 检查一个字符串是否包含所有长度为 K 的二进制子串](https://leetcode.cn/problems/check-if-a-string-contains-all-binary-codes-of-size-k/description/)

> **日期**：2026-02-23  
> **所用时间**：7min  
> **知识点**：滑动窗口、哈希集合

## 1. 题目描述

给你一个**二进制字符串** `s` 和一个整数 `k`。若 s 中包含**所有**长度为 `k` 的二进制串（即 `2^k` 种不同的 0/1 串各至少出现一次作为子串），返回 `true`，否则返回 `false`。

**示例 1：**

```
输入：s = "00110110", k = 2
输出：true
解释：长度为 2 的二进制串有 "00","01","10","11"，均出现在 s 中。
```

**示例 2：**

```
输入：s = "0110", k = 1
输出：true
解释：长度为 1 的 "0" 和 "1" 都是 s 的子串。
```

**示例 3：**

```
输入：s = "0110", k = 2
输出：false
解释：长度为 2 的 "00" 未在 s 中出现。
```

**提示：**

- `1 <= s.length <= 5 * 10^5`
- `s[i]` 为 `'0'` 或 `'1'`
- `1 <= k <= 20`

## 2. 滑动窗口 + 哈希集合

用长度为 `k` 的滑动窗口遍历 `s`，把所有出现过的长度为 `k` 的子串加入集合；若集合大小等于 `2^k`，说明所有长度为 k 的二进制串都出现过，返回 `true`，否则 `false`。

复杂度分析：

- **时间复杂度**：$O((n - k) \cdot k)$，n 为 s 长度（截取子串与入集合），或 $O(n)$ 若用滚动哈希。
- **空间复杂度**：$O((n - k) \cdot k)$，为集合中最多 `2^k` 个子串。

**Python3**

```python
class Solution:
    def hasAllCodes(self, s: str, k: int) -> bool:
        st = {s[i:i+k] for i in range(len(s) - k + 1)}

        for i in range(2**k):
            sub_s = str(bin(i))[2:]
            if ('0' * (k - len(sub_s)) + sub_s) not in st:
                return False
        return True
```

**Python3（优化：只比集合大小）**

```python
class Solution:
    def hasAllCodes(self, s: str, k: int) -> bool:
        st = {s[i:i+k] for i in range(len(s) - k + 1)}
        return len(st) == 2**k
```

# [1518. 换水问题](https://leetcode.cn/problems/water-bottles/description/)

> **日期**：2025-10-01
> **所用时间**：4min

## 1. 模拟

本题可以使用模拟的方法来解决。核心思路是不断模拟喝酒和换酒的过程，直到无法再进行换酒操作。具体步骤如下：
1. 初始化一个变量 `ans` 用于记录总共喝到的酒的数量，初始值为 0。
2. 初始化一个变量 `emptyBottles` 用于记录当前拥有的空酒瓶数量，初始值为 0。
3. 当手中还有酒（`numBottles > 0`）时，进行以下操作：
    - 将当前手中的酒喝掉，将喝掉的酒的数量累加到 `ans` 中。
    - 将喝掉酒后产生的空酒瓶数量累加到 `emptyBottles` 中。
    - 用现有的空酒瓶去换酒，能换到的新酒数量为 `emptyBottles // numExchange`，更新 `numBottles` 的值。
    - 换完酒后剩余的空酒瓶数量为 `emptyBottles % numExchange`，更新 `emptyBottles` 的值。
4. 当无法再进行换酒操作时，返回 `ans`。

复杂度分析：

- 时间复杂度: $O(n)$
- 空间复杂度: $O(1)$

**Python3**

```python
class Solution:
    def numWaterBottles(self, numBottles: int, numExchange: int) -> int:
        ans = 0
        emptyBottles = 0
        while numBottles > 0:
            ans += numBottles
            emptyBottles += numBottles
            numBottles = emptyBottles // numExchange
            emptyBottles %= numExchange
        return ans
```
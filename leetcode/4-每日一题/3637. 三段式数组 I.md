# [3637. 三段式数组 I](https://leetcode.cn/problems/three-part-array-i/description/)

> **日期**：2025-12-13  
> **所用时间**：40min  
> **知识点**：数组、模拟

## 1. 题目描述

给你一个长度为 n 的整数数组 `nums`。

若数组能被划分为三段，且满足以下性质，则称为**三段式数组（trionic）**：

- **第一段**：严格递增（从左到右）
- **第二段**：严格递减
- **第三段**：严格递增

其中相邻元素不能相等（严格单调）。三段必须非空，且顺序为「增 → 减 → 增」。

请判断给定的 `nums` 是否为三段式数组，是则返回 `true`，否则返回 `false`。

**示例：**

- `[1, 3, 2, 4]`：第一段 [1,3] 递增，第二段 [3,2] 递减，第三段 [2,4] 递增，返回 `true`
- `[1, 2, 3]`：无递减段，返回 `false`
- `[3, 2, 1]`：无递增段，返回 `false`

**约束：** 3 ≤ nums.length ≤ 10⁵

## 2. 解题算法

题意等价于：数组形状为「先升后降再升」，即存在**恰好一个峰（局部最大值）**和**恰好一个谷（局部最小值）**，且峰在谷之前。

**算法思路：** 一次遍历，对每个中间位置 `i`（1 ≤ i ≤ n-2）判断：

1. **严格单调**：若 `nums[i-1] == nums[i]` 或 `nums[i] == nums[i+1]`，直接返回 `false`
2. **峰**：若 `nums[i-1] < nums[i] > nums[i+1]`，则 `i` 为峰。此时若已出现过谷（`have_mi`），则非法（谷不能在峰前）；否则标记 `have_mx = True`
3. **谷**：若 `nums[i-1] > nums[i] < nums[i+1]`，则 `i` 为谷。此时若尚未出现峰（`!have_mx`），则非法；否则标记 `have_mi = True`

遍历结束后，必须同时满足 `have_mx and have_mi` 才为三段式数组。

**复杂度分析：**

- 时间复杂度：O(n)，单次遍历
- 空间复杂度：O(1)，仅用若干布尔变量

**Python3**

```python
class Solution:
    def isTrionic(self, nums: List[int]) -> bool:
        have_mx = have_mi = False
        for i in range(1, len(nums) - 1):
            if nums[i - 1] == nums[i] or nums[i] == nums[i + 1]:
                return False
            if nums[i - 1] < nums[i] and nums[i] > nums[i + 1]:
                if have_mi:
                    return False
                have_mx = True
            elif nums[i - 1] > nums[i] and nums[i] < nums[i + 1]:
                if not have_mx:
                    return False
                have_mi = True
        return have_mx and have_mi
```
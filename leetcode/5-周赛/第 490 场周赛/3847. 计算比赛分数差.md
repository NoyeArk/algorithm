# [3847. 计算比赛分数差](https://leetcode.cn/problems/find-the-score-difference-in-a-game/)

> **日期**：2026-02-23  
> **所用时间**：10min  
> **知识点**：模拟

## 1. 题目描述

给定一个整数数组 `nums`，按顺序模拟一场两人比赛的计分过程，计算最终两人分数之差。

**规则：**

- 初始两个分数 `s1`、`s2` 均为 0，当前加分的「对象」为 `s1`。
- 从左到右遍历 `nums`，对于下标为 `i`、数值为 `x` 的元素：
  - 若 `x` 为**奇数**，则先交换「当前加分对象」与另一人（即 `s1` 与 `s2` 互换角色），再给当前对象加上 `x`。
  - 若 `(i + 1) % 6 == 0`（即第 6、12、18… 个元素），同样先交换一次加分对象，再给当前对象加上 `x`。
  - 其余情况直接给当前对象加上 `x`。
- 返回最终**先手方分数减后手方分数**的差值（根据过程中交换次数的奇偶性确定谁算「先手」）。

**示例：**

（可根据题意补充具体输入输出；若题目为「先手减后手」则差值为 `s1 - s2` 或 `s2 - s1` 依交换次数奇偶而定。）

**提示：**

- `1 <= nums.length <= 10^5`
- `1 <= nums[i] <= 10^5`

## 2. 模拟 + 双变量交替

用 `s1`、`s2` 表示当前两人的分数，用 `change` 记录「交换次数」。遍历时：遇奇数或 `(i+1)%6==0` 则交换 `s1` 与 `s2` 并令 `change += 1`；每次将当前数加到 `s1`。

最后若 `change` 为偶数则先手对应 `s1`，否则先手对应 `s2`，返回先手分数减后手分数的差值。

复杂度分析：

- 时间复杂度：$O(n)$。
- 空间复杂度：$O(1)$。

**Python3**

```python
class Solution:
    def scoreDifference(self, nums: List[int]) -> int:
        s1 = s2 = 0
        change = 0
        for i, x in enumerate(nums):
            if x % 2 == 1:
                s1, s2 = s2, s1
                change += 1
            if (i + 1) % 6 == 0:
                s1, s2 = s2, s1
                change += 1
            s1 += x
        return s1 - s2 if change % 2 == 0 else s2 - s1
```